<%
var head = {
%>
<link type="text/css" rel="stylesheet" href="/static/css/verify.css">
<%};%>

<%
var htmlPart = {
%>
<div id="content">
	<div class="content-layout">
		<div class="maincenter" style="position: relative">
			<ol class="ui-step ui-step-3">
				<li class="ui-step-start ui-step-done">
					<div class="ui-step-line">-</div>
					<div class="ui-step-icon">
						<i class="iconfont">y</i>
						<i class="ui-step-number">1</i>
						<span class="ui-step-text"> 验证身份 </span>
					</div>
				</li>
				<li class="ui-step-active">
					<div class="ui-step-line">-</div>
					<div class="ui-step-icon">
						<i class="iconfont">y</i>
						<i class="ui-step-number">2</i>
						<span class="ui-step-text"> 修改登录密码 </span>
					</div>
				</li>
				<li class="ui-step-end">
					<div class="ui-step-line">-</div>
					<div class="ui-step-icon">
						<i class="iconfont">y</i>
						<i class="iconfont ui-step-number"></i>
						<span class="ui-step-text"> 完成 </span>
					</div>
				</li>
			</ol>
			<div class="maincenter-box">
				<form method="post" action="${host.auth}/reg/updatePwd" class="ui-form" id="J_Form">
					<div id="pass-form">
						<div class="ui-form-item" style="z-index: 98;">
							<label class="ui-label"> 新的登录密码 ：</label>
							<input class="ui-input" type="password" id="J_Password" name="newPwd">
						</div>
						<div class="ui-form-item" style="z-index: 98;">
							<label class="ui-label"> 确认新的登录密码 ：</label>
							<input name="newPwdRepeat" class="ui-input" type="password" id="J_RePassword">
						</div>
					</div>
					<div class="ui-form-item form_btn">
						<div class="loading_btns"></div>
						<input type="button" onclick="return check()" value=" 确定 " class="ui-button ui-button-lorange">
					</div>
				</form>
			</div>
			<div class="msg msg-type-error" id="J_MsgPassword" style="position: absolute; left:550px; top: 144px; display: none;"><i class="iconfont">󰅕</i>
				<div class="msg-tit"></div>
				<div class="msg-cnt" aria-live="assertive">密码设置不符合要求</div>
			</div>
			<div class="msg msg-type-info" id="J_MsgRePassword" style="position: absolute; left: 550px; top: 200px; display: none;"><i class="iconfont">󰅂</i>
				<div class="msg-tit"></div>
				<div class="msg-cnt" aria-live="assertive">请再次输入你的密码</div>
			</div>
			<div class="pw-tip" id="J_PwdTip" style="position: absolute; left: 550px; top: 83px; display: none;">
				<i class="pw-tip-arr"></i>
				<div class="pw-tip-bd">
					<div class="pw-strength"><span class="tsl" data-phase-id="r_ui_pwd_strength">强度</span>
						<div class="pw-strength-bar">
							<span class="pw-strength-1"></span>
							<span class="pw-strength-2"></span>
							<span class="pw-strength-3"></span>
							<em></em>
						</div>
					</div>
					<div class="pw-rule">
						<div class="pw-rule-item pw-rule-length"><i class="iconfont"></i><span>6~20个字符</span></div>
						<div class="pw-rule-item pw-rule-legal"><i class="iconfont"></i><span class="tsl">只能包含字母、数字以及标点符号（除空格）</span>
						</div>
						<div class="pw-rule-item pw-rule-multi"><i class="iconfont"></i><span class="tsl">字母、数字和标点符号至少包含2种</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script>
	var testData = {
		tipIcon: {
			error: '㐲',
			ok: "㑇",
			normal: ""
		},
		regex: {
			nickIllegal: /#|[~～]|[!！]|[?？]|\.\.|--|__|－|＿|※|▲|△| | |@/g, //非法字符
			passwordIllegal: /[^-+=|,0-9a-zA-Z!@#$%^&*?_.~+\/\\(){}\[\]<>]/, //不合法的
			allNumber: /^\d+$/, //全部是数字
			allLetter: /^[a-zA-Z]+$/, //全部是字母
			allCharacter: /^[-+=|,!@#$%^&*?_.~+\/\\(){}\[\]<>]+$/,//全部是字符
			allSame: /^([\s\S])\1*$/,//全部相同
			upperLetter: /[A-Z]/,//匹配大写
			lowerLetter: /[a-z]/,//匹配小写
			number: /\d/g,//匹配数字
			character: /[-+=|,!@#$%^&*?_.~+\/\\()|{}\[\]<>]/,     //匹配字符
			mobile: /^1(3|4|5|7|8)\d{9}$/
		},
		nickIllegal: function (val) {
			return this.regex.nickIllegal.test(val)
		},
		passwordIllegal: function (val) {
			return !this.regex.passwordIllegal.test(val)
		},
		allNumber: function (val) {
			return this.regex.allNumber.test(val)
		},
		allLetter: function (val) {
			return this.regex.allLetter.test(val)
		},
		allCharacter: function (val) {
			return this.regex.allCharacter.test(val)
		},
		allSame: function (val) {
			return this.regex.allSame.test(val)
		},
		upperLetter: function (val) {
			return this.regex.upperLetter.test(val)
		},
		lowerLetter: function (val) {
			return this.regex.lowerLetter.test(val)
		},
		number: function (val) {
			return this.regex.number.test(val)
		},
		character: function (val) {
			return this.regex.character.test(val)
		},
		mobile: function (val) {
			return this.regex.mobile.test(val)
		}

	};
	$('#J_Password').focus(function () {
		$('#J_PwdTip').show();
	});
	var isError = false;
	var passwordChange = {
		iconOrColor: function (clsNm, icon, clsNm_1, clsNm_2) {
			$('#J_PwdTip .pw-rule').children(clsNm).children('.iconfont').html(icon).removeClass(clsNm_1).addClass(clsNm_2);
		},
		strength: function (clsNm_1, clsNm_2, html) {
			$('#J_PwdTip .pw-strength').children('.pw-strength-bar').removeClass(clsNm_1).addClass(clsNm_2).children('em').html(html);
		}
	};
	$('#J_Password').bind('input propertychange', function () {
		var val = $(this).val();
		var endT = val.substr(val.length-1,1);
//		console.log(endT);
		if(endT == ' '){
			$.alert('不能有空格');
			val = val.substring(0,val.length-1);
			$(this).val(val);
		}
		var a = testData.number(val),
			b = testData.upperLetter(val),
			c = testData.lowerLetter(val),
			d = testData.character(val);
		if (strlen(val) <= 20 && strlen(val) >= 6) {
			passwordChange.iconOrColor(".pw-rule-length", testData.tipIcon.ok, 'pw-icon-error pw-icon-normal', 'pw-icon-ok');
			if ((a && b) || (a && c) || (a && d) || (b && c) || (b && d) || (c && d)) {
				passwordChange.iconOrColor(".pw-rule-multi", testData.tipIcon.ok, 'pw-icon-normal pw-icon-error', 'pw-icon-ok');
			}
		} else if (strlen(val) == 0) {
			passwordChange.iconOrColor(".pw-rule-length", testData.tipIcon.normal, 'pw-icon-ok pw-icon-error', 'pw-icon-normal');
			passwordChange.iconOrColor(".pw-rule-legal", testData.tipIcon.normal, 'pw-icon-ok pw-icon-error', 'pw-icon-normal');
			passwordChange.iconOrColor(".pw-rule-multi", testData.tipIcon.normal, 'pw-icon-ok pw-icon-error', 'pw-icon-normal');
			passwordChange.strength('pw-strength-bar-1 pw-strength-bar-2 pw-strength-bar-3', 'pw-strength-bar', '');
		} else {
			passwordChange.iconOrColor(".pw-rule-length", testData.tipIcon.error, 'pw-icon-normal pw-icon-ok', 'pw-icon-error');
			passwordChange.iconOrColor(".pw-rule-multi", testData.tipIcon.error, 'pw-icon-normal pw-icon-ok', 'pw-icon-error');
			if (testData.passwordIllegal(val)) {
				passwordChange.iconOrColor(".pw-rule-legal", testData.tipIcon.ok, 'pw-icon-normal pw-icon-error', 'pw-icon-ok');
			} else {
				passwordChange.iconOrColor(".pw-rule-legal", testData.tipIcon.error, 'pw-icon-normal pw-icon-ok', 'pw-icon-error');
			}
		}
		if (a || b || c || d) {
			passwordChange.strength('pw-strength-bar-2 pw-strength-bar-3', 'pw-strength-bar-1', TRLang.pwd_level_low);
		}
		if ((a && b) || (a && c) || (a && d) || (b && c) || (b && d) || (c && d)) {
			passwordChange.strength('pw-strength-bar-1 pw-strength-bar-3', 'pw-strength-bar-2', TRLang.pwd_level_medium);
		}
		if (a && b && c && d && (strlen(val) > 7)) {
			passwordChange.strength('pw-strength-bar-1 pw-strength-bar-2', 'pw-strength-bar-3', TRLang.pwd_level_high)
		}
	});
	$('#J_Password').blur(function () {
		var thisVal = $(this).val();
		$('#J_PwdTip').hide();
		if (strlen(thisVal) > 20 || strlen(thisVal) < 6) {
			$('#J_MsgPassword').show().removeClass('msg-type-info').addClass('msg-type-error').children('.msg-cnt').html(TRLang.ERROR_MALFORM_PASSWORD).siblings('.iconfont').html('󰅕');
		} else {
			$('#J_PwdTip .pw-rule .pw-rule-item').each(function () {
				if ($(this).children('.iconfont').hasClass('pw-icon-error')) {
					$('#J_MsgPassword').show().removeClass('msg-type-info').addClass('msg-type-error').children('.msg-cnt').html(TRLang.ERROR_MALFORM_PASSWORD).siblings('.iconfont').html('󰅕');
				} else {
					$('#J_MsgPassword').show().removeClass('msg-type-error').addClass('msg-type-info').children('.msg-cnt').html(TRLang.r_ui_pwd_strength).siblings('.iconfont').html('󰅂');

					var rengthT = $('#J_PwdTip .pw-strength-bar em').html();
					var styleT = '';
					if (rengthT == '中') {
						styleT = '#ff7d1b';
					} else if (rengthT == '强') {
						styleT = '#22a43a';
					}
					$('#J_MsgPassword .msg-cnt').append('<span style="color:' + styleT + '">' + rengthT + '<span>');
				}
			})
		}
	});
	$('#J_RePassword').focus(function () {
		$('#J_MsgRePassword').show().removeClass('msg-type-error').addClass('msg-type-info').children('.msg-cnt').html('请再次输入你的密码').siblings('.iconfont').html('󰅂');
	});
	$('#J_RePassword').blur(function () {
		if ($(this).val() == $('#J_Password').val()) {
			$('#J_MsgRePassword').hide();
		} else {
			$('#J_MsgRePassword').show().removeClass('msg-type-info').addClass('msg-type-error').children('.msg-cnt').html(TRLang.ERROR_GENERAL_CONFIRM_PASSWORD_NOT_MATCH).siblings('.iconfont').html('󰅕');
		}
	});
	function strlen(str) { //test nick length
		var len = 0;
		for (var i = 0; i < str.length; i++) {
			var c = str.charCodeAt(i);
			if ((c >= 0x0001 && c <= 0x007e) || (0xff60 <= c && c <= 0xff9f)) {
				len++;
			}
			else {
				len += 2;
			}
		}
		return len;
	}
	TRLang = {
		r_ui_recommendNickTip: '推荐使用',

		ERROR_THIRDPARTY_ILLEGAL_PARAM: '输入的个性化信息错误',
		ERROR_THIRDPARTY_GENERAL_FAILURE: '网络繁忙，请稍后再试',
		ERROR_THIRDPARTY_GENERAL_BANNED_WORDS: '您输入的信息包含违禁词',
		ERROR_THIRDPARTY_CBU_NAME_BANNED_WORDS: '您输入的信息包含违禁词',
		ERROR_THIRDPARTY_GENERAL_INVALID_CHARACTER: '您输入的信息包含非法字符',
		ERROR_GENERAL_MOBILEPHONE_EMPTY: '请输入你的手机号码',
		ERROR_GENERAL_MOBILE_MALFORM: '手机号码格式不正确，请重新输入',
		ERROR_REGISTER_MOBILE_IN_BLACK: '该手机号码注册账号过多，请更换手机号重试',
		ERROR_REGISTER_MOBILE_UNAVAILABLE: '此手机号码绑定的帐户数已达上限，请更换',
		ERROR_REGISTER_CHECKCODE_VERIFY_LIMIT: '验证码错误次数已经超过最大次数，请重新获取验证码',
		ERROR_REGISTER_CHECKCODE_SEND_LIMIT: '此手机发送验证码已经达到上限，请在24小时后重试',
		ERROR_REGISTER_CHECKCODE_SEND_TOO_FREQUENT: '手机验证码发送频率太快，请稍后重试',
		ERROR_REGISTER_EMAIL_SEND_TOO_FREQUENT: '邮件发送频率太快，请稍后重试',
		ERROR_GENERAL_PHONE_EMPTY: '请输入你的电话/手机号码',
		ERROR_GENERAL_PHONE_MALFORM: '电话/手机号码不正确，请重新输入',
		ERROR_MALFORM_NICK_NAME: '5-25个字符，请勿包含姓名/身份证/银行卡等隐私信息，一旦设置成功无法修改',
		ERROR_MISS_EMAIL: '缺少邮箱',
		ERROR_MALFORM_NICK_NAME_TOO_SHORT: '会员名为5-25字符',
		ERROR_MALFORM_NICK_NAME_TOO_LONG: '会员名为5-25字符',
		ERROR_MALFORM_NICK_NAME_ALL_NUM: '会员名为5-25字符，需要包含字母或者汉字',
		ERROR_MISS_NICK_NAME: '请设置会员名',
		ERROR_MALFORM_NICK_NAME_INVALID_CHARACTER: '该会员名包含了非法字符，请重新输入。',
		ERROR_DUP_NICK_NAME: '该会员名已被使用。你可以:<br/>1、重新输入或选择推荐的会员名。<br/>2、使用该会员名<a href=\'{loginLink}\'>登录</a>。'.replace("{loginLink}", "${host.auth}/login"),
		ERROR_UNDERLINE: '会员名首位和末位不能是下划线\'_\'',
		ERROR_GENERAL_NICK_ALL_NUM: '不能全部为数字',
		ERROR_BANNED_WORDS: '会员名不能含有敏感词',
		ERROR_PASSWORD_LIKE_NICK: '密码和账户名太相似',
		ERROR_MALFORM_PASSWORD: '密码设置不符合要求',
		ERROR_MALFORM_PASSWORD_TOO_SHORT: '密码设置不符合要求',
		ERROR_MALFORM_PASSWORD_TOO_LONG: '密码设置不符合要求',
		ERROR_REGISTER_CHECKCODE_NOT_MATCH: '验证码不正确，请重新输入',
		ERROR_REGISTER_UPSMS_CHECKCODE_NOT_MATCH: '验证失败，请重新发送短信',
		ERROR_REGISTER_UPVOICE_CHECKCODE_NOT_MATCH: '验证失败，请重新拨打语音电话',
		ERROR_REGISTER_UPSMS_CHECKCODE_GET_FAIL: '短信验证码获取失败',
		ERROR_REGISTER_UPVOICE_CHECKCODE_GET_FAIL: '语音验证码获取失败',
		ERROR_REGISTER_CHECKCODE_MALFORM: '验证码是6位数字，请重新输入',
		ERROR_IMAGECHECKCODE_EMPTY: '请点击左边的输入框获取验证码',
		ERROR_IMAGECHECKCODE_MALFORM: '验证码长度为4位',
		ERROR_IMAGECHECKCODE_INVALID: '验证码不正确，请重新输入',
		ERROR_GENERAL_IMAGECHECKCODE_NOT_NULL: '手机验证码不能为空',
		ERROR_GENERAL_IMAGECHECKCODE_NOT_MATCH: '验证码不正确，请重新输入',
		ERROR_REGISTER_EMAIL_IN_BLACK: '此邮箱暂不支持作为登录名，请更换',
		ERROR_GENERAL_EMAIL_EMPTY: '请输入你的电子邮箱',
		ERROR_GENERAL_MISS_MOBILE: '缺少手机号',
		ERROR_GENERAL_EMAIL_MALFORM: '邮箱格式不正确，请重新输入',
		ERROR_GENERAL_EMAIL_MALFORM_TOO_LONG: '邮箱长度最大为60个字符',
		ERROR_GENERAL_USER_NOT_EXISTS: '账户不存在',
		ERROR_REGISTER_ACCOUNT_EXIST_IN_CURRENT: '你的账户已经激活',
		ERROR_REGISTER_ACCOUNT_EXIST_OTHER_BU: '账户已经存在',
		ERROR_REGISTER_NICK_UNAVAILABLE: '会员名不可用',
		ERROR_REGISTER_PASSWORD_TOO_SIMPLE: '你的密码过于简单或存在安全风险，请更换',
		ERROR_REGISTER_ALI_FAKE_PROXY_CELLPHONE: '不支持阿里小号注册，请更换',
		ERROR_ACTIVATION_UNSUPPORT_USER: '您的账号无法进行业务激活',
		GENERIC_FAILURE: '网络繁忙，请稍后再试',
		ERROR_GENERAL_OUTER_SYSTEM_FAIL: '网络繁忙，请稍后再试',
		ERROR_GENERAL_ILLEGAL_PARAM: '参数错误',
		ERROR_FIRSTNAME_EMPTY: '请输入你的英文名',
		ERROR_LASTNAME_EMPTY: '请输入你的英文姓',
		ERROR_FIRSTNAME_MALFORM: '您的姓中有非英文字符，请输入英文字符',
		ERROR_LASTNAME_MALFORM: '您的姓中有非英文字符，请输入英文字符',
		ERROR_THIRDPARTY_PARAM_EMPTY: '参数不能为空',
		ERROR_THIRDPARTY_PARAM_MALFORM: '参数格式不正确',
		ERROR_ACTIVATION_TAOBAO_USER_EXISTS: '您的账号已经开通淘宝业务',
		TIP_REGISTER_CHECKCODE_SENT: '验证码已发送至你的手机，请查收',
		TIP_REGISTER_VOICECHECKCODE_SENT: '电话正在拨出，请您留意接听',
		TIP_REGISTER_VOICECHECKCODE_MSG: '如您无法收到短信验证码，请点击\'获取语音验证码\'。我们将给您拨打电话，请您留意接听',
		TIP_REGISTER_MOBILECHECKCODE_MSG: '验证码已发送到你的手机，15分钟内输入有效，请勿泄漏',
		ERROR_SMS_UPWARD_UNRECEIVED: '未收到验证码。<p>勿关闭窗口，验证成功后会自动跳转 </p>',
		ERROR_SMS_UPWARD_ERROR_CODE: '验证失败，请重新发送。<p>勿关闭窗口，验证成功后会自动跳转 </p>',
		ERROR_SMS_UPWARD_TIMEOUT: '验证码失效，请 <a id=\'J_reSendUpMsg\' class=\'resend-upmsg\' href=\'javascript:;\'>刷新验证码</a>，重新发送',
		ERROR_VOICE_UPWARD_ERROR_CODE: '验证失败，点击再次呼叫我们将向你拨打语音来电',
		ERROR_VOICE_UPWARD_TIMEOUT: '验证码失效，请重新获取验证码',
		ERROR_PHONE_EMPTY: '请补全您的联系电话信息',
		ERROR_PHONE_AREA_MALFORM: '您的区号格式有误，请输入8位以内的数字',
		ERROR_PHONE_NUMBER_MALFORM: '您输入的号码格式有误，请输入14位以内数字或者数字与\'-\'的组合',
		ERROR_GENERAL_COMPANY_INVALID: '输入的字符必须是3-50位的中文汉字',
		ERROR_GENERAL_ADDRESS_INVALID: '输入的字符必须是5-200位的字符',
		ERROR_VOICE_UPWARD_UNRECEIVED: '未收到验证码',
		ERROR_REGISTER_EMAIL_UNAVAILABLE: '此邮箱作为登录名已存在，请更换邮箱或登录',
		ERROR_REGISTER_EMAIL_ICBU_GUEST: '此邮箱作为登录名已存在，请更换邮箱或登录',
		ERROR_GENERAL_CONFIRM_PASSWORD_NOT_MATCH: '两次密码输入不一致',
		ERROR_GENERAL_ILLEGAL_SIGN: '您请求的参数错误，请重新登录后重试',
		ERROR_GENERAL_MOBILEPHONE_MALFORM: '手机号码格式不正确，请重新输入',
		ERROR_GENERAL_SESSION_TIMEOUT: '请求已过期，请重新注册',
		ERROR_HAVANA_SERVICE_UNAVAILABLE: '系统错误，请稍后重试',
		ERROR_MOBILE_IN_BLACK: '该手机号码已被注册，请更换手机号重试<br/>或者使用该手机号直接<a href=\'{loginLink}\'>登录</a>。'.replace("{loginLink}", "${host.auth}/login"),
		ERROR_OVER_TIME: '激活链接已过期',
		ERROR_SHANG_JIA_RU_ZHU: '您的账号正在审核中,暂不支持登录',
		INPUT_ERROR: '参数错误',
		JOIN_BLACKLIST: '输入的邮箱不可用，请更换邮箱重新输入',
		TIP_REGISTER_EMAIL_SENT: '发送成功',
		TIP_REGISTER_NAME_SUCCESS: '用户名可用',

		pwd_level_high: '强',
		pwd_level_low: '弱',
		pwd_level_medium: '中',

		r_m2e_verificationCodeSentTip: '重发验证码(%t% s)',
		r_ui_pwd_strength: '强度',
		r_p_upsmsSendTip: '请勿关闭窗口，验证成功后会自动跳转',

		ERROR_GENERAL_COMPANY_EMPTY: '公司名称不能为空',
		SC_OVERSEA_ERROR_GENERAL_COMPANY_LENGTH: '输入的字符长度必须在3-128位之间',
		SC_OVERSEA_ERROR_GENERAL_COMPANY_INVALID: '输入的英文字符',

		ERROR_ACCOUNTTYPE_EMPTY: '请选择你的角色',
		ERROR_PHONE_AREA_EMPTY: '请输入你的区号',
		ERROR_PHONE_NUMBER_EMPTY: '请输入你的电话号码',
		SC_OVERSEA_ERROR_GENERAL_COUNTRY_EMPTY: '请选择你的国家/省份',
		ERROR_GENERAL_NOCAPTCHA_CHECK_ERROR: '滑动验证失败，请重试',


		ERROR_YUNMAIL_PREFIX_EMPTY: '云邮箱前缀不能为空', //"云邮箱前缀不能为空",
		ERROR_YUNMAIL_FORMAT_ERROR: '云邮箱前缀格式错误', //"云邮箱前缀格式错误",
		ERROR_YUNMAIL_LENGTH_ERROR: '云邮箱前缀应为6-32位字符',//"云邮箱前缀应为6-32位字符",
		ERROR_ALIYUN_BIZCAREGORY_EMPTY: '所属行业不能为空',

		r_p_tip_enterUserName: '建议会员名使用简体中文，方便好记',
		ERROR_COMPANY_NAME_BANNED_WORDS: '企业名不能含有敏感词',

		r_m_voice_v_code_recall_tip: '重新拨打',
		r_m_voice_v_code_recall_time_format_tip: '重新拨打(%t% s)',
		r_m_text_v_code_resend_tip: '重发',
		r_m_text_v_code_resend_time_format_tip: '重发(%t% s)',
		REGISTER_TIP_GET_VOICECHECKCODE_MSG: '获取语音验证码',
		REGISTER_TIP_PLAY_VOICE_MSG: '点击播放语音',
		REGISTER_TIP_LISTNE_VOICE_MSG: '请仔细收听',
		REGISTER_TIP_GET_NEW_VOICE_MSG: '重新获取验证码',
		REGISTER_TIP_GET_IMAGECHECKCODE_MSG: '获取图片验证码',
		r_m_text_up_sms_confirm_tip: '请确认本机号码为：',
		r_m_text_up_voice_confirm_tip: '请确认本机号码为：',
		REGISTER_TIP_GET_NEW_IMAGECHECKCODE_MSG: '重新获取验证码',

		ERROR_COUNTRY_NOT_FOUND: '找不到国家/地区',
		ERROR_MALFORM_COMPANY_NAME_TOO_LONG: '公司名称长度超过限制',
		ERROR_DUP_DEFAULT_NICK_NAME: '该会员名已被使用，请刷新页面或者设置新会员名',
		ERROR_ACTIVATION_UNSUPPORT_USER_ALIPAY: '您的账号无法进行业务激活'
	};
	function check(){
		var newPwd = $('input[name="newPwd"]').val();
		var newPwdRepeat = $('input[name="newPwdRepeat"]').val();
		if(newPwd){
			if($('#J_MsgPassword').hasClass('msg-type-error')){
				$('input[name="newPwd"]').focus();
				return false;
			}else{
				if(newPwdRepeat === newPwd){
					console.log('123123')
					$('.loading_btns').show();
					$.ajax({
						url:'${host.auth}/reg/updatePwd',
						type:'post',
						data:{
							newPwd:newPwd,
							newPwdRepeat:newPwdRepeat
						},
						success:function(data){
							if(data.code == 1){
//								$('#J_Form').submit();
//								return true;
								window.location.href = '/modify/success?type=loginPassword';
							}else{
								$('.loading_btns').hide();
								$.alert(data.message);
								return false;
							}
						}
					});
				}else{
					console.log('abcabc')
					$('#J_MsgRePassword').show().removeClass('msg-type-info').addClass('msg-type-error').children('.msg-cnt').html(TRLang.ERROR_GENERAL_CONFIRM_PASSWORD_NOT_MATCH).siblings('.iconfont').html('󰅕');
					return false;
				}
			}
		}else{
			$('#J_MsgPassword').show().removeClass('msg-type-info').addClass('msg-type-error').children('.msg-cnt').html('新密码不能为空').siblings('.iconfont').html('󰅕');
			return false;
		}
	}
</script>
<%};
include("/layout/base.html",{headSection:head,htmlSection:htmlPart}){}
%>