<%
var head = {
%>
<link rel="stylesheet" href="/static/css/exchange/style.css">
<link rel="stylesheet" href="/static/css/font/exchange/iconfont.css">
<style>
    .container {
        width: 100%;
        height: 400px;
        overflow: hidden;
        margin: 0 auto;
        position: relative;
    }
    #list {
        width: 700%;
        height: 400px;
        position: absolute;
    }
    #list div {
        width: 14.285715%;
        float: left;
        height: 100%;
    }
    #list div a{
        display: block;
        width:100%;
        height:100%;
    }
    .arrow {
        position: absolute;
        color: #fff;
        text-decoration: none;
        bottom: 20px;
        text-align: center;
        width: 40px;
        height: 40px;
        font-size: 30px;
        top: 230px;
        font-weight: bold;
        background: rgba(0, 0, 0, 0.3);
    }
    #left {
        position: absolute;
        left: 0px;
        top:0;
    }
    #right {
        position: absolute;
        right: 0px;
        top:0;
    }
    .btns {
        height: 10px;
        position: absolute;
        bottom: 20px;
        left: 50%;
        margin-left:-0%;
    }
    .btns span {
        cursor: pointer;
        border: 1px solid #000;
        border-radius: 50%;
        margin-right: 8px;
        -webkit-border-radius: 50%;
        -moz-border-radius: 50%;
        width: 10px;
        height: 10px;
        float: left;
        background: #fff;
    }
    .btns .on {
        background: orange;
        border: 1px solid orange;
    }
    .floatBtn{
        width:1260px;
        margin:142px auto;
        position: relative;
        height:84px;
    }
    .floatBtn a{
        width:30px;
        height:84px;
        display: block;
        background: rgba(255,255,255,0.8);
        color:#fff;
        line-height: 84px;
    }
</style>
<%};%>
<%
var htmlPart = {
%>
<div class="grid-0 exchange-index">

    <!--顶部轮播图-->
    <div class="index-banner">
        <div class="grid-row bdg-row" style="position: relative">
            <!--菜单-->
            <%include("/layout/menu.html"){} %>
        </div>
        <div class="exchange-index-banner">
            <div class="container" id="container">
                <div id="list">
                </div>
                <div class="floatBtn">
                    <a href="javascript:void(0)" class="arrow" id="left" ><</a>
                    <a href="javascript:void(0)" class="arrow" id="right" >></a>
                </div>

                <div class="btns">
                </div>
            </div>
        </div>
    </div>








</div>




<div class="grid-0 exchange-index exchange-recommend-resource jingpintuijian bgc-f5f6f8">
    <div class="grid-row">

        <h2 class="bdg-overseas-title">合作伙伴</h2>

        <ul class="bdg-partner-list">
            <li><a  href="javascript:void (0)" title="贵阳大数据交易所"><img src="/static/images/exchange/logo_01.png" alt=""></a></li>
            <li><a  href="javascript:void (0)" title="中信银行"><img src="/static/images/exchange/logo_02.png" alt=""></a></li>
            <li><a  href="javascript:void (0)" title="腾讯大数据"><img src="/static/images/exchange/logo_03.png" alt=""></a></li>
            <li><a  href="javascript:void (0)" title="聚信世纪"><img src="/static/images/exchange/logo_04.png" alt=""></a></li>
            <li><a  href="javascript:void (0)" title="路通"><img src="/static/images/exchange/logo_05.png" alt=""></a></li>
        </ul>
    </div>
</div>

<script src="/static/js/exchange/common.js"></script>
<script src="/static/js/exchange/index.js"></script>
<script>
	$(function(){
		$.ajax({
			type: "get",
			url: host.website + '/api/image/list',
			success: function (data) {
				if (data.code == 1) {
					var html = '';
					var html2 = '';
					for(var j=0;j<data.data.length; j++){
						html+='<div><a href="'+data.data[j].imgLink+'" class="imgFloat_'+j+'" style="background:url('+data.data[j].imgLink+') center center no-repeat"></a></div>';
                        if(j == 0){
							html2+='<span class="on" index="'+(j+1)+'"></span>';
                        }else{
							html2+='<span index="'+(j+1)+'"></span>';
                        }
                    }
                    $('#list').html(html);
                    $('.btns').html(html2);
					var len = data.data.length;
                    $('#list').css('width',100*len+'%');
                    $('#list div').css('width',100/len+'%');
					var oList = $("#list");
					var oRight = $("#right");
					var oLeft = $("#left");
					var oWidth = parseInt(oList.css('width')) / len;      //计算图片的宽度从而达到自适应屏幕宽度
					var oSpan = $(".btns span");
					var index = 1;
					var interval = 3000;
					var timer = null;
					oList.css('left',-oWidth);              //图片加载完成时将图片向左偏移一张图片

					function animate(offset){                               //过渡效果
						var newLeft = parseInt(oList.css('left')) + offset;         //点击后的图片偏移量
						oList.animate({'left':newLeft + 'px'},function(){
							if(newLeft > 0){                                 //判断图片是否已经循环一次
								oList.css('left',-oWidth * len);
							}
							if(newLeft < -oWidth * len){
								oList.css('left',-oWidth);
							}
						});
					}

					function showBtns(){                //按钮过渡
						oSpan.each(function(){                  //遍历每个按钮将其Class设置为空
							$(this).attr('class','');
						});
						$(".btns > span").eq(index - 1).addClass('on');          //将当前Span的索引Class设置为on
					}

					function autoplay(){                        //自动播放
						timer = setTimeout(function(){
							oRight.trigger('click');
							autoplay();
						},interval);
					}

					function stop(){
						clearInterval(timer);
					}

					oList.on('mouseover',function(){            //判断鼠标是否在容器上面
						stop();
					});

					oList.on('mouseout',function(){
						autoplay();
					});

					oRight.on('click',function(){
						if(oList.is(':animated')){
							return;
						}
						if(index == len){         //向右点击 index索引+1
							index = 1;
						}else{
							index += 1;
						}
						animate(-oWidth);
						showBtns();
					});

					oLeft.on('click',function(){
						if(oList.is(':animated')){
							return;
						}
						if(index == 1){         //向左点击 index索引-1
							index = len;
						}else{
							index -= 1;
						}
						animate(oWidth);
						showBtns();
					});

					oSpan.each(function(){                  //底部按钮点击切换图片
						$(this).on('click',function(){
							if(oList.is(":animated") || $(this).attr('class') == "on"){
								return;
							}
							var myIndex = $(this).attr('index');
							var offset = (myIndex - index) * -oWidth;
							index = myIndex;
							animate(offset);
							showBtns();
						})
					})

					autoplay();

				} else {
					$.alert(data.message)
				}
			}
		});
//		var oList = $("#list");
//		var oRight = $("#right");
//		var oLeft = $("#left");
//		var oWidth = parseInt(oList.css('width')) / 7;      //计算图片的宽度从而达到自适应屏幕宽度
//		var oSpan = $(".btns span");
//		var len = 5;
//		var index = 1;
//		var interval = 3000;
//		var timer = null;
//		oList.css('left',-oWidth);              //图片加载完成时将图片向左偏移一张图片
//
//		function animate(offset){                               //过渡效果
//			var newLeft = parseInt(oList.css('left')) + offset;         //点击后的图片偏移量
//			oList.animate({'left':newLeft + 'px'},function(){
//				if(newLeft > 0){                                 //判断图片是否已经循环一次
//					oList.css('left',-oWidth * len);
//				}
//				if(newLeft < -oWidth * 5){
//					oList.css('left',-oWidth);
//				}
//			});
//		}
//
//		function showBtns(){                //按钮过渡
//			oSpan.each(function(){                  //遍历每个按钮将其Class设置为空
//				$(this).attr('class','');
//			});
//			$(".btns > span").eq(index - 1).addClass('on');          //将当前Span的索引Class设置为on
//		}
//
//		function autoplay(){                        //自动播放
//			timer = setTimeout(function(){
//				oRight.trigger('click');
//				autoplay();
//			},interval);
//		}
//
//		function stop(){
//			clearInterval(timer);
//		}
//
//		oList.on('mouseover',function(){            //判断鼠标是否在容器上面
//			stop();
//		});
//
//		oList.on('mouseout',function(){
//			autoplay();
//		});
//
//		oRight.on('click',function(){
//			if(oList.is(':animated')){
//				return;
//			}
//			if(index == 5){         //向右点击 index索引+1
//				index = 1;
//			}else{
//				index += 1;
//			}
//			animate(-oWidth);
//			showBtns();
//		});
//
//		oLeft.on('click',function(){
//			if(oList.is(':animated')){
//				return;
//			}
//			if(index == 1){         //向左点击 index索引-1
//				index = 5;
//			}else{
//				index -= 1;
//			}
//			animate(oWidth);
//			showBtns();
//		});
//
//		oSpan.each(function(){                  //底部按钮点击切换图片
//			$(this).on('click',function(){
//				if(oList.is(":animated") || $(this).attr('class') == "on"){
//					return;
//				}
//				var myIndex = $(this).attr('index');
//				var offset = (myIndex - index) * -oWidth;
//				index = myIndex;
//				animate(offset);
//				showBtns();
//			})
//		})
//
//		autoplay();
	});
</script>
<%};
include("/layout/base.html",{headSection:head,htmlSection:htmlPart}){}
%>
