<%
var head = {
%>
<link rel="stylesheet" type="text/css" href="/static/css/user-center-menu.css">
<link rel="stylesheet" type="text/css" href="/static/css/myseller.css">
<%};%>

<%
var htmlPart = {
%>
<div class="user-center">
    <div class="user-center-bd y-row">
        <div class="user-center-menu y-left">
            <%include("/layout/user-center-menu.html"){}%>
        </div>
        <div class="user-center-box y-right">
            <h3 class="center-title">å•†å“ç®¡ç†</h3>
            <div class="myseller-wrapper">
                <div class="wrapper-tab">
                    <ul class="wrapper-tab-box">
                        <li class="first active"><a href="/myseller">å‘å¸ƒå•†å“</a></li>
                        <li><a href="/myseller/tradeing">å‡ºå”®ä¸­çš„å•†å“</a></li>
                    </ul>
                </div>
                <div class="category-search category-label">
                    <label>ç±»ç›®æœç´¢ï¼š</label>
                    <input type="text">
                    <span>æœç´¢</span>
                </div>
                <div class="lastused-category category-label">
                    <label>æœ€è¿‘ä½¿ç”¨çš„ç±»ç›®ï¼š</label>
                    <select>
                        <option value="">è¯·é€‰æ‹©</option>
                        <option value="">åˆ†ç±»1</option>
                        <option value="">åˆ†ç±»2</option>
                    </select>
                </div>
                <div class="select-category-box">
                    <!--<div class="select-category-item y-left">-->
                        <!--<div class="search-item">-->
                            <!--<span>ğŸ”</span>-->
                            <!--<input type="text">-->
                        <!--</div>-->
                        <!--<div class="item-box">-->
                            <!--<dl>-->
                                <!--<dt>æŸ¥è¯¢</dt>-->

                            <!--</dl>-->

                        <!--</div>-->
                    <!--</div>-->
                    <!--<div class="select-category-item y-left">-->
                        <!--<div class="item-box">-->
                            <!--<dl>-->
                                <!--<dt>æŸ¥è¯¢</dt>-->
                                <!--<dd>èº«ä»½è¯ä¿¡æ¯æŸ¥è¯¢</dd>-->
                                <!--<dd>å¤±ä¿¡è¢«æ‰§è¡ŒäººæŸ¥è¯¢</dd>-->
                                <!--<dd>èº«ä»½è¯ä¿¡æ¯æŸ¥è¯¢</dd>-->
                            <!--</dl>-->
                        <!--</div>-->
                    <!--</div>-->
                </div>
                <div class="cate-path">
                    <div class="clearfix">
                        <label>æ‚¨å½“å‰çš„é€‰æ‹©æ˜¯ï¼š</label>
                        <span class="clearfix-content"></span>
                    </div>
                    <span class="arrow"></span>
                </div>
                <div class="pulish-btn">
                    <button disabled="disabled" id="pusblishBtn">å‘å¸ƒå•†å“</>
                </div>
            </div>
        </div>
    </div>
</div>
<%};
include("/layout/base.html",{headSection:head,htmlSection:htmlPart}){}
%>
<script type="text/javascript">

    var url = "/category/findByPId/1";
    var pid = 0;
    var datas = null ;
    var nextAll = '';
    var isTrue = false;

    //
    loadData(url,pid);
    //ç‚¹å‡»åŠ è½½ã€‚ã€‚ã€‚
    function clickLoadData(url,pid,that){
        $(that).parents(".select-category-item").nextAll(".select-category-item").remove();
        $(that).addClass('active').siblings().removeClass('active');
        loadData(url,pid);
        currentCategory(that);
        nextAll = $(that).parents(".select-category-item").nextAll(".select-category-item");
        $('#pusblishBtn').click(function(){
            var category = $('.clearfix-content').text();
            window.location.href = "/myseller/publish?catId="+pid+"&category="+category;
        })
    }
    function currentCategory(that){
        var indexs = $(that).parents(".select-category-item").index();
        if(indexs == 0){
            $('.clearfix-content > .clearfix-box').remove();
            $('.clearfix-content').append('<span class="clearfix-box clearfix-box-'+indexs+'">'+$(that).text()+'</span>');
        }else{
            $('.clearfix-content').children('.clearfix-box-'+indexs).remove();
            $('.clearfix-content').append('<span class="clearfix-box clearfix-box-'+indexs+'"> > '+$(that).text()+'</span>');
        }

    }

function showBtn(isTrue){
    if(isTrue == true){
        $('#pusblishBtn').css({'cursor':'no-drop','background':'#ccc'}).attr({'disabled':'disabled'});
    }else{
        $('#pusblishBtn').css({'cursor':'pointer','background':'#00c1de'}).removeAttr('disabled');
    }
}


    //åŠ è½½ã€‚ã€‚ã€‚
    function loadData(url,pid){
        $.ajax({
            type: "get",
            url: url,
            data: {
                pid:pid
            },
            success: function(msg){
                if(msg.code == 1){
                    datas = msg.data;
                    if(datas.length > 0){
                        var html = '';
                        html += '<div class="select-category-item y-left">';
                        html += '<div class="item-box">';
                        html += '<dl>';
                        for(var i = 0; i < datas.length; i++){
                            html += '<dd onclick="clickLoadData(url,'+datas[i].catId+',this)">'+datas[i].catName+'</dd>';
                        }
                        html += '</dl>';
                        html += '</div>';
                        html += '</div>';
                        $('.select-category-box').append(html);
                        isTrue = true;
                        console.log('0:'+isTrue);

                    }else{
                        isTrue = false;
                    }
                }else{
                    $.alert(msg.message)
                }
                showBtn(isTrue)
            }
        });
    }

</script>